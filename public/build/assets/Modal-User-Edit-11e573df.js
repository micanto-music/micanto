import{u as N,a as g,i as y,r as C,j as e,s as _,P as q,h as E}from"./index-816a077d.js";import{B as S}from"./BaseModal-05f2c7a2.js";import{E as T}from"./EditCoverDroppable-6719ec2f.js";function M(s){var m,c,u,f,p,x,w,h;const[a]=N(),{formState:{errors:i},register:n,handleSubmit:j,watch:P}=g(),d=(m=s==null?void 0:s.data)!=null&&m.image?(c=s==null?void 0:s.data)==null?void 0:c.image:y,[o,v]=C.useState(d),l=s.data,b=async t=>{_();const r=new FormData;o&&o!==d&&r.append("image",o),r.append("password",t.password),r.append("name",t.name),r.append("email",t.email),t.new_password!=""&&r.append("new_password",t.new_password),q.updateUser(l==null?void 0:l.id,r).then(()=>{E()}),s.onClose()};return e.jsx(S,{title:a("profile.title"),show:s.isOpen,onClose:s.onClose,children:e.jsxs("form",{onSubmit:j(b),encType:"multipart/form-data",children:[e.jsx(T,{cover:d,setCover:v}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{children:a("profile.current_password")}),e.jsx("input",{type:"password",className:"w-full form-input",...n("password",{required:{value:!0,message:a("edit.required")}})}),((u=i.password)==null?void 0:u.message)&&e.jsx("div",{className:"validationText",children:(f=i.password)==null?void 0:f.message}),e.jsx("p",{children:a("profile.password_hint")})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{children:a("profile.name")}),e.jsx("input",{type:"text",className:"w-full form-input",defaultValue:l==null?void 0:l.name,...n("name",{required:{value:!0,message:a("edit.required")}})}),((p=i.name)==null?void 0:p.message)&&e.jsx("div",{className:"validationText",children:(x=i.name)==null?void 0:x.message})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{children:a("profile.email")}),e.jsx("input",{type:"email",className:"w-full form-input",defaultValue:l==null?void 0:l.email,...n("email",{required:{value:!0,message:a("edit.required")}})}),((w=i.email)==null?void 0:w.message)&&e.jsx("div",{className:"validationText",children:(h=i.email)==null?void 0:h.message})]}),e.jsxs("div",{className:"form-field",children:[e.jsx("label",{children:a("profile.new_password")}),e.jsx("input",{type:"password",className:"w-full form-input",...n("new_password")})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{onClick:s.onClose,type:"button",className:"btn btn-close mr-2","data-bs-dismiss":"modal","aria-label":"Close",children:a("close")}),e.jsx("button",{className:"btn btn-primary",type:"submit",children:a("save")})]})]})})}export{M as default};
